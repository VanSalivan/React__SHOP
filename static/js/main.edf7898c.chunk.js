(this["webpackJsonpreact-shop"]=this["webpackJsonpreact-shop"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(5),i=n.n(r),s=(n(20),n(21),n(0)),o=function(){return Object(s.jsx)("footer",{className:"page-footer blue-grey",children:Object(s.jsx)("div",{className:"footer-copyright",children:Object(s.jsxs)("div",{className:"container",children:["\xa9 ",(new Date).getFullYear()," Copyright Text",Object(s.jsx)("a",{className:"grey-text text-lighten-4 right",href:"https://github.com/VanSalivan/React__SHOP",children:"Repositories"})]})})})},l=(n(23),function(){return Object(s.jsx)("nav",{className:"header__nav purple darken-3",children:Object(s.jsxs)("div",{className:"nav-wrapper",children:[Object(s.jsx)("a",{href:"/",className:"brand-logo",children:"Fortnite Shop"}),Object(s.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:Object(s.jsx)("li",{children:Object(s.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/VanSalivan/React__SHOP",children:"Repositories"})})})]})})}),d=n(2),u=n(9),j=n.n(u),b=n(10),O=n(4),h=Object(O.b)("goods/fetchGoodsList",Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fortniteapi.io/v1/shop?lang=ru",{headers:{Authorization:"acf15e19-393962a5-dbc2eb65-ed820ecd"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.featured);case 7:case"end":return e.stop()}}),e)})))),m=Object(O.c)({name:"goods",initialState:{goods:[],loading:!0},reducers:{},extraReducers:function(e){e.addCase(h.pending,(function(e){e.loading=!0})),e.addCase(h.fulfilled,(function(e,t){e.loading=!1,e.goods=t.payload}))}}).reducer,f=n(13),x=n(3),p=Object(O.c)({name:"basket",initialState:{order:[],isBasketOpen:!1},reducers:{showTheBasket:function(e){e.isBasketOpen=!e.isBasketOpen},addToBasket:function(e,t){var n=e.order.findIndex((function(e){return e.id===t.payload.id})),c=null;if(n<0){var a=Object(x.a)(Object(x.a)({},t.payload),{},{quantity:1});c=[].concat(Object(f.a)(e.order),[a])}else c=e.order.map((function(e,t){return t===n?Object(x.a)(Object(x.a)({},e),{},{quantity:e.quantity+1}):e}));return Object(x.a)(Object(x.a)({},e),{},{order:c})},removeFromBasket:function(e,t){e.order=e.order.filter((function(e){return e.id!==t.payload}))},incQuantity:function(e,t){e.order=e.order.map((function(e){if(e.id===t.payload){var n=e.quantity+1;return Object(x.a)(Object(x.a)({},e),{},{quantity:n})}return e}))},decQuantity:function(e,t){e.order=e.order.map((function(e){if(e.id===t.payload){var n=e.quantity-1;return Object(x.a)(Object(x.a)({},e),{},{quantity:n>=0?n:0})}return e}))}}}),v=p.actions,N=v.addToBasket,g=v.removeFromBasket,y=v.incQuantity,k=v.decQuantity,B=v.showTheBasket,q=p.reducer,w=(n(29),n(30),function(){return Object(s.jsx)("div",{className:"spinner-wrap",children:Object(s.jsxs)("div",{className:"spinner-body",children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{children:Object(s.jsx)("div",{})}),Object(s.jsx)("div",{children:Object(s.jsx)("div",{})})]})})}),C=(n(31),Object(O.c)({name:"alert",initialState:{alertName:null},reducers:{addAlertName:function(e,t){e.alertName=t.payload},removeAlertName:function(e){e.alertName=null}}})),S=C.actions,_=S.addAlertName,A=S.removeAlertName,T=C.reducer,F=(n(32),function(e){var t=e.id,n=e.name,c=e.description,a=e.price,r=e.full_background,i=Object(d.b)();return Object(s.jsxs)("div",{className:"card goods-card",children:[Object(s.jsx)("div",{className:"card-image",children:Object(s.jsx)("img",{src:r,alt:n})}),Object(s.jsxs)("div",{className:"card-content",children:[Object(s.jsx)("span",{className:"card-title",children:n}),Object(s.jsx)("p",{children:c})]}),Object(s.jsxs)("div",{className:"card-action",children:[Object(s.jsx)("button",{className:"btn",onClick:function(){i(N({id:t,name:n,price:a})),i(_(n))},children:" \u041a\u0443\u043f\u0438\u0442\u044c "}),Object(s.jsxs)("span",{className:"right",style:{fontSize:"1.8rem"},children:[a," \u0440\u0443\u0431"]})]})]})}),M=function(){var e=Object(d.c)((function(e){return e.goods})).goods;return e.length?Object(s.jsx)("div",{className:"goods",children:e.map((function(e){return Object(s.jsx)(F,Object(x.a)({},e),e.id)}))}):Object(s.jsx)("h3",{children:" \u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442 "})},R=(n(33),n(34),function(e){var t=e.id,n=e.name,c=e.price,a=e.quantity,r=Object(d.b)();return Object(s.jsxs)("li",{className:"collection-item",children:[n,Object(s.jsx)("i",{className:"material-icons basket-quantity",onClick:function(){return r(k(t))},children:"remove"}),"x",a,Object(s.jsx)("i",{className:"material-icons basket-quantity",onClick:function(){return r(y(t))},children:"add"}),"= ",c*a," \u0440\u0443\u0431",Object(s.jsx)("span",{className:"secondary-content",onClick:function(){return r(g(t))},children:Object(s.jsx)("i",{className:"material-icons",children:"close"})})]})}),E=function(e){var t=e.order,n=e.handleBasketOpen,c=t.reduce((function(e,t){return e+t.price*t.quantity}),0);return Object(s.jsxs)("ul",{className:"collection basket-list",children:[Object(s.jsxs)("li",{className:"collection-item active",children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430",Object(s.jsx)("span",{className:"secondary-content",onClick:n,children:Object(s.jsx)("i",{className:"material-icons",children:"close"})})]}),t.length?t.map((function(e){return Object(s.jsx)(R,Object(x.a)({},e),e.id)})):Object(s.jsx)("li",{className:"collection-item",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"}),Object(s.jsxs)("li",{className:"collection-item active",children:["\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",c," \u0440\u0443\u0431"]}),Object(s.jsx)("li",{className:"collection-item active",children:Object(s.jsx)("button",{className:"btn-small",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c"})})]})},Q=(n(35),function(e){var t=e.quantity,n=e.handleBasketOpen;return Object(s.jsxs)("div",{className:"cart blue darken-4 white-text",onClick:n,children:[Object(s.jsx)("i",{className:"material-icons",children:"shopping_cart"}),t?Object(s.jsx)("span",{className:"cart-quantity",children:t}):null]})}),P=n(11),z=n(12),D=n(15),H=n(14),I=function(e){Object(D.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(P.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).el=document.createElement("div"),e}return Object(z.a)(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"render",value:function(){return i.a.createPortal(this.props.children,this.el)}}]),n}(a.a.Component),J=I,V=(n(36),function(){var e=Object(d.c)((function(e){return e.alertMessage})).alertName,t=Object(d.b)();return Object(c.useEffect)((function(){setTimeout((function(){t(A())}),3e3)}),[e]),Object(s.jsx)("div",{className:"alert-container",children:Object(s.jsxs)("div",{className:"alert",children:[e," \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"]})})}),G=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.goods})).loading,n=Object(d.c)((function(e){return e.alertMessage})).alertName,a=Object(d.c)((function(e){return e.basket})),r=a.order,i=a.isBasketOpen,o=function(){return e(B())};return Object(c.useEffect)((function(){e(h())}),[]),Object(s.jsxs)("main",{className:"container shop-content",children:[Object(s.jsx)(Q,{quantity:r.length,handleBasketOpen:o}),t?Object(s.jsx)(w,{}):Object(s.jsx)(M,{}),i&&Object(s.jsx)(J,{children:Object(s.jsx)(E,{order:r,handleBasketOpen:o})}),n&&Object(s.jsx)(J,{children:Object(s.jsx)(V,{})})]})};var L=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(l,{}),Object(s.jsx)(G,{}),Object(s.jsx)(o,{})]})},U=Object(O.a)({reducer:{goods:m,basket:q,alertMessage:T},middleware:function(e){return e({thunk:!0})}});i.a.render(Object(s.jsx)(d.a,{store:U,children:Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(L,{})})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.edf7898c.chunk.js.map